(function(){var e,t,n,r,i,s,o,u,a,f;f=typeof exports!="undefined"&&exports!==null?exports:window,f.lib=[],u=2,t=function(){function e(e,t,n,r,i){var s,o,u,a;this.day=t,o=e.split("-"),a=o[0],s=o[1],u=o[2],this.date=new Date(a,s-1,u),this.status=n,r!==void 0&&(this.from=this.parseTime(r),this.to=this.parseTime(i))}return e.prototype.parseTime=function(e){var t,n,r,i;return t=0,e.indexOf("pm")>0&&(t=12),e=e.replace("am","").replace("pm",""),i=e.split(":"),n=i[0],r=i[1],r===void 0&&(r=0),t===0&&parseInt(n)===12&&(n=0),n=parseInt(n)+parseInt(t),new Date(0,0,0,n,r,0,0)},e}(),n=function(){function e(e){const n=new Array("Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday");var r,i,s,o;this.days=[];for(i=s=0;s<=6;i=s+=1)e[n[i]].times.status==="open"&&(r=e[n[i]].times.hours[0].from,o=e[n[i]].times.hours[0].to),this.days[i]=new t(e[n[i]].date,n[i],e[n[i]].times.status,r,o)}return e}(),e=function(){function e(e){var t;e=e.replace("<p>","").replace("</p>",""),t=e.split(";".trim()),this.phone=t[0],this.email=t[1],this.tmz=t[2],this.address1=t[3],this.address2=t[4]}return e}(),i=function(){function t(t,n,r,i,s,o){this.name=t,this.category=n,this.latitude=r,this.longitude=i,this.contact=new e(s),this.parseWeek(o)}return t.prototype.parseWeek=function(e){var t,r,i,s;this.week=[],s=[];for(t=r=0,i=u-1;r<=i;t=r+=1)s.push(this.week[t]=new n(e[t]));return s},t.prototype.isCurrentlyOpen=function(){var e,t;e=(new Date).getDay();if(this.week[0].days[e].status==="24hours")return!0;if(this.week[0].days[e].status==="not-set")return!1;if(this.week[0].days[e].to.getHours()<this.week[0].days[e].from.getHours()&&!(this.week[0].days[e].from.getHours()<=(new Date).getHours()&&(new Date).getHours()<=this.week[0].days[e].to.getHours()))return!0;if(this.week[0].days[e].from.getHours()<=(new Date).getHours()&&(new Date).getHours()<=this.week[0].days[e].to.getHours()){this.week[0].days[e].to.getHours()!==(new Date).getHours()&&this.week[0].days[e].to.getMinutes()===0&&(t=!0);if(this.week[0].days[e].from.getMinutes()<=(new Date).getMinutes()&&(t||(new Date).getMinutes()<=this.week[0].days[e].to.getMinutes()))return!0}return!1},t}(),r=function(){function e(){}return e.parseJson=function(e){var t,n,r,s;s=[];for(t=n=0,r=e.locations.length-1;n<=r;t=n+=1)s.push(f.lib[t]=new i(e.locations[t].name,e.locations[t].category,e.locations[t].lat,e.locations[t].long,e.locations[t].contact,e.locations[t].weeks));return s},e}(),o=function(e,t,n){var r;return r={center:new google.maps.LatLng(t,n),zoom:18},new google.maps.Map(document.getElementById(e).children[1],r)},a=function(){var e,t,n,r;r=[];for(e=t=0,n=f.lib.length-1;t<=n;e=t+=1)f.lib[e].category==="library"?(document.getElementById(f.lib[e].name).children[0].innerHTML+=f.lib[e].name,o(f.lib[e].name,f.lib[e].latitude,f.lib[e].longitude),document.getElementById(f.lib[e].name).children[2].innerHTML+=f.lib[e].contact.address1+"<BR>"+f.lib[e].contact.address2,document.getElementById(f.lib[e].name).children[3].children[1].innerHTML+=f.lib[e].contact.phone,document.getElementById(f.lib[e].name).children[4].children[1].innerHTML+=f.lib[e].contact.email,document.getElementById(f.lib[e].name).children[5].children[1].children[0].innerHTML+="OPEN HOURS ("+f.lib[e].contact.tmz+")",f.lib[e].isCurrentlyOpen()?f.lib[e].week[0].days[(new Date).getDay()].status==="24hours"?r.push(document.getElementById(f.lib[e].name).children[5].children[0].innerHTML+='<b><font color="green">OPEN&nbsp&nbsp&nbsp&nbsp24 HOURS</font></b>'):r.push(document.getElementById(f.lib[e].name).children[5].children[0].innerHTML+='<b><font color="green">TODAYS HOURS&nbsp&nbsp&nbsp&nbsp'+f.lib[e].week[0].days[(new Date).getDay()].from.getHours()+":"+f.lib[e].week[0].days[(new Date).getDay()].from.getMinutes()+" to "+f.lib[e].week[0].days[(new Date).getDay()].to.getHours()+":"+f.lib[e].week[0].days[(new Date).getDay()].to.getMinutes()+"</font></b>"):r.push(document.getElementById(f.lib[e].name).children[5].children[0].innerHTML+='<b><font color="red">CLOSED&nbsp&nbsp&nbsp&nbsp</font></b>')):r.push(void 0);return r},s=function(){$.getJSON("//api3.libcal.com/api_hours_grid.php?iid=1287&format=json&weeks="+u+"&callback=?",function(e){r.parseJson(e),a()})},s()}).call(this);