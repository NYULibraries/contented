---
layout: default
---

{% if page.collection == 'locations' %}
  {% include map.html %}
{% endif %}

{% include banner.html %}
<div id="collection" class="wrap content content--collection" data-swiftype-index="false">
  <table class="table table--collection tablesaw tablesaw-stack" data-tablesaw-mode="stack" data-collection="{{ page.collection }}">
    <thead>
      <tr class="table__row table__row--head">
        {% for field in page.fields %}
          {% if field.last == 'Subject' and page.url contains '/people/' %}
            {% continue %}
          {% endif %}
          <th class="table__cell table__cell--sortable table__cell--{{ field.first }}" data-field="{{ field.first }}"{% if field.first == "title" %} data-sort="asc"{% endif %}>{{ field.last }}</th>
        {% endfor %}
      </tr>
    </thead>
    <tbody>
      {% assign items = site[page.collection] | sort:"title" %}
      {% for item in items limit:site.page_size %}
        <tr class="table__row">
        {% for field in page.fields %}
          {% assign key = field.first %}
          {% assign value = item[key] %}
          {% if key == 'expertise' and page.url contains '/people/' %}
            {% continue %}
          {% endif %}
          <td class="table__cell">
            {% if key == 'title' %}
              {% include card.html item=item %}
            {% elsif key == 'departments' %}
              {% for department in value %}
                <a href="/departments/{{ department | slugify }}">{{ department }}</a>{% unless forloop.last %}, {% endunless %}
              {% endfor %}
            {% elsif 'service,space,location' contains key %}
              {% if value %}
                <a href="/{{key}}s/{{ value | slugify }}">{{ value }}</a>
              {% endif %}
            {% else %}
              {{ value | join:', ' }}
            {% endif %}
          </td>
        {% endfor %}
      </tr>
      {% endfor %}
    </tbody>
  </table>

  <div class="pagination">
    {% assign num_pages = items.size | divided_by:site.page_size %}
    {% assign num_items = num_pages | times:site.page_size %}
    {% if items.size > num_items %}{% assign num_pages = num_pages | plus:1 %}{% endif %}
    {% if num_pages > 1 %}
      {% for i in (1..num_pages) %}
        <a href="?page={{ i }}" class="pagination__link{% if i == 1 %} is-selected{% endif %}" data-page="{{ i }}">{{ i }}</a>
      {% endfor %}

      <a href="?page=2" class="pagination__next ss-right right" data-page="2">Next</a>
    {% endif %}
  </div>
</div>